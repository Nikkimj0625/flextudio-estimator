<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>í”Œë ‰ìŠ¤íŠœë””ì˜¤ ê°€ê²¬ì  ê³„ì‚°ê¸°</title>
  <style>
    body{font-family:Pretendard,Arial,sans-serif;max-width:840px;margin:20px auto;padding:20px;line-height:1.6;color:#333}
    h2{border-bottom:2px solid #ccc;padding-bottom:6px}
    label{display:block;margin:8px 0 4px}
    select,input[type=number]{width:100%;padding:6px;margin-bottom:10px;box-sizing:border-box}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .row>div{flex:1;min-width:46%}
    button{background:#222;color:#fff;border:none;padding:9px 16px;cursor:pointer;margin-top:6px}
    table{width:100%;border-collapse:collapse;margin-top:24px}
    th,td{border:1px solid #aaa;padding:8px;text-align:center;font-size:.94em}
    th{background:#f0f0f0}
    .group-box{margin-bottom:28px;padding:16px;border:2px solid #aaa;border-radius:8px;background:#f7f9fb}
    .license-group{background:#fafafa;border:1px solid #ddd;padding:14px;border-radius:6px;margin-top:10px}
    .highlight{font-weight:700;color:#d60000}
    .note{font-size:.82em;color:#777;margin-bottom:6px}
    .tooltip{position:relative;display:inline-block;cursor:help;border-bottom:1px dotted #666}
    .tooltip .tooltiptext{visibility:hidden;width:300px;background:#333;color:#fff;text-align:left;border-radius:6px;padding:10px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-150px;opacity:0;transition:opacity .3s;font-size:.85em}
    .tooltip:hover .tooltiptext{visibility:visible;opacity:1}
    #licenseWarning{color:#d60000;font-size:.9em;margin-top:4px;display:none}
  </style>
</head>
<body>
<h2>í”Œë ‰ìŠ¤íŠœë””ì˜¤ ê°€ê²¬ì  ê³„ì‚°ê¸°</h2>

<!-- 1. êµ¬ì¶• ê³µìˆ˜ ì…ë ¥ -->
<div class="group-box">
  <h3>1ï¸âƒ£ êµ¬ì¶• ê³µìˆ˜ ì…ë ¥
    <span class="tooltip">[?]
      <span class="tooltiptext">
        ERPÂ ê²¬ì ì„œì— ê¸°ì¬ëœ <strong>ì…ë ¥/ì¡°íšŒ í™”ë©´ ìˆ˜</strong>ë§Œ ì•Œë©´<br>
        í”Œë ‰ìŠ¤ êµ¬ì¶• MMì„ ìë™ ì‚°ì •í•©ë‹ˆë‹¤.<br>
        ë©€í‹°ë””ë°”ì´ìŠ¤ ëŒ€ì‘Â ì²´í¬ ì‹œ ì´ MM Ã—Â 10% ê°€ì‚°.
      </span>
    </span>
  </h3>

  <div class="row">
    <div><label>ì…ë ¥ í™”ë©´ ìˆ˜</label><input id="inputScreens" type="number" min="0" value="0"></div>
    <div><label>ì¡°íšŒ í™”ë©´ ìˆ˜</label><input id="viewScreens" type="number" min="0" value="0"></div>
    <div><label>ë©€í‹°ë””ë°”ì´ìŠ¤ ëŒ€ì‘</label><input id="multiDevice" type="checkbox"></div>
    <div><label>ì™¸ë¶€ ì—°ë™ ìˆ˜</label><input id="externalIntegrations" type="number" min="0" value="0"></div>
    <div><label>ì—­í• ë³„ ì ‘ê·¼ì œì–´</label><input id="roleAccess" type="checkbox"></div>
  </div>
</div>

<!-- 2. ë¼ì´ì„ ìŠ¤ ì„ íƒ -->
<div class="group-box">
  <h3>2ï¸âƒ£ ë¼ì´ì„ ìŠ¤ ì„ íƒ</h3>

  <div class="license-group">
    <label><input type="radio" name="licenseType" value="subscription" checked onchange="toggleLicense()"> êµ¬ë…í˜•</label>
    <label><input type="radio" name="licenseType" value="fixed" onchange="toggleLicense()"> êµ¬ì¶•í˜•</label>

    <!-- êµ¬ë…í˜• ì„¸ë¶€ ì˜µì…˜ -->
    <div id="subscriptionBox">
      <p class="note">â€» ìµœì†Œ êµ¬ì„±&nbsp;=&nbsp;ê°œë°œìâ€¯1ëª… + DBëª¨ë“ˆâ€¯1ê°œ + ë‚´ë¶€ì‚¬ìš©ìâ€¯50ëª…<br>
         &nbsp;&nbsp;â†’ ì›”&nbsp;<strong>550,000ì›</strong>Â ë¯¸ë§Œì¼ ê²½ìš° ê³„ì‚°ì´ ì œí•œë©ë‹ˆë‹¤.</p>

      <div class="row">
        <div><label>ê°œë°œì ê³„ì • ìˆ˜ (â‰¥1)</label><input id="devCount" type="number" min="1" value="1"></div>
        <div><label>FlexDB 3GB ì¸ìŠ¤í„´ìŠ¤ ìˆ˜</label><input id="flexdbCount" type="number" min="0" value="0"></div>
        <div><label>DB ì—°ë™ ìˆ˜</label><input id="dbCount" type="number" min="0" value="0"></div>
      </div>

      <div><label>ë³´ì•ˆ ì˜µì…˜ (ì„ íƒ)</label>
        <label><input id="sso" type="checkbox"> AzureÂ ADÂ SSO (â‚©450,000)</label>
        <label><input id="vpn" type="checkbox"> AWSÂ VPN (â‚©450,000)</label>
      </div>

      <div class="row">
        <div><label>ë‚´ë¶€ ì‚¬ìš©ì ìˆ˜ (ê¸°ë³¸ 50ëª…)</label><input id="userCount" type="number" min="50" value="50"></div>
        <div>
          <label>ì²­êµ¬ ì£¼ê¸°</label>
          <select id="billingCycle" onchange="cycleChanged()">
            <option value="monthly">ì›”</option>
            <option value="yearly">ì—°</option>
          </select>
        </div>
        <div>
          <label>ì—° ë‹¨ìœ„ í• ì¸ìœ¨&nbsp;<span class="note">(10â€‘40%)</span></label>
          <input id="discountRate" type="number" min="10" max="40" value="10">
        </div>
      </div>

      <div id="licenseWarning">âš ï¸Â ì›”Â 55ë§Œì›Â ë¯¸ë§Œì…ë‹ˆë‹¤.Â ëª¨ë“ˆÂ·ì‚¬ìš©ì ìˆ˜ë¥¼ ëŠ˜ë ¤ì£¼ì„¸ìš”.</div>
    </div>

    <!-- êµ¬ì¶•í˜• ì•ˆë‚´ -->
    <div id="fixedBox" style="display:none;margin-top:10px">
      <p class="note">
        ê¸°ë³¸ í¬í•¨: ê°œë°œìâ€¯1ëª… Â· DBì—°ë™â€¯1ê±´ Â· FlexDBâ€¯3GB Â· ë‚´ë¶€ì‚¬ìš©ìâ€¯50ëª…<br>
        ê¸°ë³¸ ê°€ê²©: <strong>â‚©50,000,000</strong> (ì¼ì‹œë¶ˆ)<br>
        ì¶”ê°€ ëª¨ë“ˆì€ ë³„ë„ ê³¼ê¸ˆ
      </p>
    </div>
  </div>
</div>

<button onclick="calculate()">ğŸ’°Â ê°€ê²¬ì Â ê³„ì‚°í•˜ê¸°</button>

<div id="result"></div>

<script>
/* â”€â”€ ìœ í‹¸ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const comma = n => n.toLocaleString();

/* â”€â”€ ë¼ì´ì„ ìŠ¤ í† ê¸€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function toggleLicense(){
  const subBox=document.getElementById('subscriptionBox');
  const fixedBox=document.getElementById('fixedBox');
  const type=document.querySelector('input[name=licenseType]:checked').value;
  subBox.style.display = type==='subscription' ? 'block':'none';
  fixedBox.style.display = type==='fixed' ? 'block':'none';
}

/* ì²­êµ¬ ì£¼ê¸° ë³€ê²½ â†’ í• ì¸ í•„ë“œ í™œì„±/ë¹„í™œì„± */
function cycleChanged(){
  const cycle=document.getElementById('billingCycle').value;
  const disc=document.getElementById('discountRate');
  if(cycle==='monthly'){disc.value=10;disc.disabled=true;}
  else{disc.disabled=false;}
}

/* â”€â”€ ë©”ì¸ ê³„ì‚° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
function calculate(){
  /* â‘  êµ¬ì¶• MM ê³„ì‚° */
  const inputMM=Number(document.getElementById('inputScreens').value)*1.0;
  const viewMM =Number(document.getElementById('viewScreens').value)*0.6;
  const integMM=Number(document.getElementById('externalIntegrations').value)*0.5;
  const accessMM=document.getElementById('roleAccess').checked?0.3:0;
  let totalMM=inputMM+viewMM+integMM+accessMM;
  if(document.getElementById('multiDevice').checked) totalMM*=1.1;

  const devCost = Math.round(totalMM*13_000_000);
  const uiCost  = Math.round(devCost*0.30);
  const buildCost = devCost+uiCost;

  /* â‘¡ ë¼ì´ì„ ìŠ¤ ê³„ì‚° */
  const type=document.querySelector('input[name=licenseType]:checked').value;
  let licCost=0, licDesc='';

  if(type==='subscription'){
    /* í•„ìˆ˜Â·ì„ íƒ ëª¨ë“ˆ ìˆ˜ì¹˜ */
    const devCnt   = Math.max(1,Number(document.getElementById('devCount').value));
    const flexCnt  = Number(document.getElementById('flexdbCount').value);
    const dbCnt    = Number(document.getElementById('dbCount').value);
    const ssoChk   = document.getElementById('sso').checked;
    const vpnChk   = document.getElementById('vpn').checked;
    const users    = Math.max(50,Number(document.getElementById('userCount').value));

    /* ëª¨ë“ˆ ê°€ê²©í‘œ */
    const monthDev = devCnt*150_000;
    const monthFlex= flexCnt*300_000;
    const monthDB  = dbCnt*300_000;
    const monthSec = (ssoChk?450_000:0)+(vpnChk?450_000:0);
    const monthUser= 100_000 + (users>50? (users-50)*2_000 : 0);

    let monthSum = monthDev + monthFlex + monthDB + monthSec + monthUser;

    /* ìµœì†Œ ì›” 55ë§Œì› ê°•ì œ */
    const warn=document.getElementById('licenseWarning');
    if(monthSum<550_000){
      warn.style.display='block';
      return; // ê³„ì‚° ì¤‘ë‹¨
    } else warn.style.display='none';

    const cycle=document.getElementById('billingCycle').value;
    const disc = cycle==='yearly' ? Math.min(Math.max(Number(document.getElementById('discountRate').value),10),40) : 0;

    licCost = (cycle==='monthly')
        ? monthSum
        : Math.round(monthSum*12*(1-disc/100));

    licDesc = `êµ¬ë…í˜• / ${cycle==='monthly'?'ì›” ì²­êµ¬':`ì—° ì²­êµ¬(í• ì¸Â ${disc}%)`}`;
  } else {
    licCost = 50_000_000;
    licDesc = 'êµ¬ì¶•í˜• / ì¼ì‹œë¶ˆ';
  }

  const grand = buildCost + licCost;

  /* â‘¢ ê²°ê³¼ ì¶œë ¥ */
  document.getElementById('result').innerHTML = `
    <table>
      <thead><tr><th>êµ¬ë¶„</th><th>ë‚´ìš©</th><th>ê¸ˆì•¡(ì›)</th></tr></thead><tbody>
        <tr><td colspan="3" class="highlight">ğŸ“¦Â êµ¬ì¶• ê¸ˆì•¡</td></tr>
        <tr><td>ì´ ê³µìˆ˜</td><td>${totalMM.toFixed(2)}Â MM</td><td>-</td></tr>
        <tr><td>UI/UX ì»¨ì„¤íŒ…</td><td>-</td><td>${comma(uiCost)}</td></tr>
        <tr><td>ê°œë°œ</td><td>-</td><td>${comma(devCost)}</td></tr>

        <tr><td colspan="3" class="highlight">ğŸ’³Â ë¼ì´ì„ ìŠ¤ ê¸ˆì•¡</td></tr>
        <tr><td>ë¼ì´ì„ ìŠ¤</td><td>${licDesc}</td><td>${comma(licCost)}</td></tr>

        <tr><td colspan="3" class="highlight">ì´ ê²¬ì  ê¸ˆì•¡Â :Â ${comma(grand)}</td></tr>
      </tbody></table>`;
}
</script>
</body>
</html>
